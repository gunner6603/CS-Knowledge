# 데이터베이스
## 데이터베이스 개념
### 관계 데이터 모델
* 키 : 릴레이션(테이블)에서 특정 투플(행)을 식별할 때 사용하는 속성(열) 또는 속성의 집합
    * 키는 릴레이션 간 연결고리 역할도 함

    * 종류
        1. 슈퍼키 : 투플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
        2. 후보키 : 투플을 유일하게 식별할 수 있는 속성의 최소 집합
        3. 기본키 : 여러 후보키 중 하나를 선정하여 대표로 삼는 키
        4. 대리키(인조키) : 일련번호 같은 가상의 속성을 만들어 기본키로 삼는 키
            * DBMS나 관련 소프트웨어에서 임의로 생성하는 값으로 사용자가 직관적으로 그 값의 의미를 알 수 없음
        5. 대체키 : 기본키로 선정되지 않은 후보키
        6. 외래키 : 다른 릴레이션의 기본키를 참조하는 속성

* 무결성 제약조건
    * 데이터 무결성 : 데이터베이스에 저장된 데이터의 일관성과 정확성을 지키는 것

    * 종류
        1. 도메인 무결성 제약조건(도메인 제약)
            * 릴레이션 내의 투플들이 각 속성의 도메인에 지정된 값만을 가져야 한다는 조건
        2. 개체 무결성 제약조건(기본키 제약)
            * 릴레이션은 기본키를 지정해야 하고, 기본키는 NULL 값이 아닌 유일한 값이어야 한다는 조건
        3. 참조 무결성 제약조건(외래키 제약)
            * 자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 속성의 도메인이 동일해야 하고, 자식 릴레이션이 참조하고 있는 값을 부모 릴레이션에서 삭제/변경하는 경우 제약을 받는다는 조건
            * 부모 릴레이션에서 투플을 삭제하는 경우 옵션 (참조 무결성 제약조건을 수행하기 위한 옵션)
                * RESTRICTED : 부모 릴레이션 투플 삭제 거부
                * CASCADE : 관련 자식 릴레이션 투플 같이 삭제
                * DEFAULT : 자식 릴레이션 외래키를 미리 설정해 둔 값으로 변경
                * NULL : 자식 릴레이션 외래키를 NULL 값으로 변경

## SQL 기본 문법
### 종류
* 데이터 정의어(DDL) : 테이블이나 관계의 구조를 생성하는 데 사용하며 CREATE, ALTER, DROP 문 등이 있음
* 데이터 조작어(DML) : 테이블에 데이터를 검색, 삽입, 수정, 삭제하는 데 사용하며 SELECT, INSERT, UPDATE, DELETE 문 등이 있음
* 데이터 제어어(DCL) : 데이터의 사용 권한을 관리하는 데 사용하며 GRANT, REVOKE 문 등이 있음

### 데이터 조작어-검색
* SELECT 문 : 데이터를 조회하는 명령어, 질의어(query)라고 부름
    * 문법
        * SELECT [ALL | DISTINCT] 속성이름
        * FROM 테이블이름
        * WHERE 검색조건
        * GROUP BY 속성이름
        * HAVING 검색조건
        * ORDER BY 속성이름 [ASC | DESC]

* SQL 문은 관계대수와 달리 기본적으로 중복을 제거하지 않음
    * 중복을 제거하고 싶으면 DISTINCT 키워드를 사용

* 두 개 이상 테이블에서의 SQL 질의
    * 조인(join)
    * 부속질의(subquery) : SELECT 문의 WHERE 절에 또 다른 테이블 결과를 이용하기 위해 다시 SELECT 문을 괄호로 묶는 것
        * 부속질의 간에는 상하관계가 있으며 하위 부속질의를 먼저 실행하고 그 결과를 이용하여 상위 부속질의를 실행
        * 상관 부속질의(correlated subquery)는 상위 부속질의의 투플을 이용하여 하위 부속질의를 계산하고 이를 다시 이용하여 상위 부속질의를 실행
            * 상위 부속질의와 하위 부속질의가 독립적이지 않고 서로 관련을 맺고 있음
    * 집합 연산
        * 합집합 : UNION, UNION ALL(중복을 포함하여 모든 결과를 구하는 경우)
        * 차집합 : MINUS, NOT IN (MySQL의 경우)
        * 교집합 : INTERSECT, IN (MySQL의 경우)
    * EXISTS, NOT EXISTS
        * 상관 부속질의문 형식으로, WHERE EXISTS(NOT EXISTS) (SELECT ~ )와 같이 사용
        * EXISTS는 하위 부속질의에서 조건에 맞는 투플이 하나라도 존재하면 해당 상위 부속질의의 투플을 결과에 포함시킴
        * NOT EXISTS는 하위 부속질의에서 조건에 맞는 투플이 존재하지 않는 경우에만 해당 상위 부속질의의 투플을 결과에 포함시킴

### 데이터 정의어
* CREATE 문 : 테이블을 구성하고, 속성과 속성에 관한 제약을 정의하며, 기본키 및 외래키를 정의하는 명령
    * 문법
        * CREATE TABLE 테이블이름
        * ( 속성이름 데이터타입 [NULL | NOT NULL | UNIQUE | DEFAULT 기본값 | CHECK 체크조건]
        * PRIMARY KEY 속성이름
        * FOREIGN KEY 속성이름 REFERENCES 테이블이름(속성이름)
        * ON DELETE CASCADE | SET NULL
        * )
            * ON DELETE 옵션을 명시하지 않으면 RESTRICT임(외래키에 의해 참조되는 투플은 삭제 불가)

* 문자형 데이터 타입 CHAR, VARCHAR
    * CHAR(n) : 저장되는 문자의 길이가 n보다 작으면 나머지는 공백으로 채움
    * VARCHAR(n) : 저장되는 문자의 길이만큼만 기억장소를 차지함
    * CHAR는 데이터를 읽을 때 성능 이점이 있고, VARCHAR는 저장 효율이 좋음

* ALTER 문 : 생성된 테이블의 속성과 속성에 관한 제약을 변경하며, 기본키 및 외래키를 변경하는 명령
    * 문법
        * ALTER TABLE 테이블이름
        * ADD COLUMN 속성이름 데이터타입
        * DROP COLUMN 속성이름
        * MODIFY COLUMN 속성이름 데이터타입 제약조건
        * CHANGE COLUMN 속성이름 바꿀속성이름 데이터타입 제약조건
        * ADD PRIMARY KEY(속성이름)
        * ADD FOREIGN KEY(속성이름) REFERENCES 참조테이블이름(참조속성이름)
        * ADD | DROP CONSTRAINT 제약이름

* DROP 문 : 테이블을 삭제하는 명령
    * 테이블의 구조와 데이터를 모두 삭제
    * 데이터만 삭제하려면 DELETE 문을 사용
    * 문법
        * DROP TABLE 테이블이름

### 데이터 조작어-삽입, 수정, 삭제
* INSERT 문 : 테이블에 새로운 투플을 삽입하는 명령
    * 문법
        * INSERT INTO 테이블 이름(속성리스트)
        * VALUES (값리스트)

* 대량 삽입(bulk insert) : 여러 개의 투플을 한 번에 삽입하는 방법
    * INSERT INTO 테이블 이름(속성리스트) SELECT ~

* UPDATE 문 : 특정 속성 값을 수정하는 명령
    * 문법
        * UPDATE 테이블이름
        * SET 속성이름 1=값 1, 속성이름 2=값 2, ...
        * WHERE 검색조건

* DELETE 문 : 테이블에 있는 기존 투플을 삭제하는 명령
    * 문법
        * DELETE FROM 테이블이름
        * WHERE 검색조건

## SQL 고급 문법
###